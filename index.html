<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>meApp</title>
    <!--     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>
    <!-- hero -->
    <section class="hero cerulean-blue cultured">
        <div class="hero-body">
            <div class="container">
                <p class="title is-1 cultured">meApp</p>
                <button id="openMyFaves" class="button" style="background-color: #F4B942; float:right; font-weight: bold; color: whitesmoke;">MyFaves</button>
                <p id="date"><p> 
                <p id="time"></p>
            </div>
        </div>
    </section>
    <div class="column">
        <div class="tile is-ancestor">
            <div class="tile is-vertical">
                <div class="tile">
                    <div class="tile is-parent is-vertical is-4">
                        <article class="tile is-child notification cerulean-frost cultured">
                            <header>
                                <abbr title="Save To Favorites"><h1 id="saveTheQuote" class="button is-medium"  style="border: none; background-color: transparent; position: absolute; bottom: 5px; left: 5px; " >❤️</h1></abbr>
                            </header>
                            <div id="quote-container" class="mt-2">
                                <!-- Quote goes here -->
                            </div>
                        </article>
                        <div id="weather-container" class="tile is-child notification middle-blue-green" style="padding: .5rem .5rem .5rem">
                            <div class="card" id="weather-container" style="padding: .5rem .5rem .5rem">
                                <div class="card-content" style="padding: .5rem .5rem .5rem">
                                    <div class="media">
                                        <figure class="media-left">
                                            <p class="image is-64x64" id="image"></p>
                                        </figure>
                                        <div class="media-content">
                                            <div class="content">
                                                <p>
                                                    <strong id="cityName"></strong><br>
                                                    <strong><small>Temp(F):</small></strong><span id="temp"></span><span>&#176</span>
                                                    <strong><small>Humidity:</small></strong><span id="humidity"></span><br>
                                                    <strong><small>Sunrise:</small></strong><span id="sunrise"></span><br>
                                                    <strong><small>Sunset:</small></strong><span id="sunset"></span>
                                                </p>
                                            </div>
                                        </div>
                                            <figure class="media-left">
                                                <p id="today" style="font-size: 20px;"></p>
                                            </figure>
                                    </div>
                                </div>
                            </div>
                        <br>
                        <div class="card" id="weather-container" style="padding: .5rem .5rem .5rem">
                            <div class="card-content" style="padding: .5rem .5rem .5rem">
                              <div class="media">
                                <figure class="media-left">
                                    <p class="image is-64x64" id="image2"></p>
                                </figure>
                                  <div class="media-content">
                                      <div class="content">
                                            <p>
                                                <strong id="cityName2"></strong><br>
                                                <strong><small>Temp(F):</small></strong><span id="temp2"></span><span>&#176</span>
                                                <strong><small>Humidity:</small></strong><span id="humidity2"></span><br>
                                                <strong><small>Chance of Rain:</small></strong><span id="pop"></span><span>%</span>
                                            </p>
                                        </div>
                                    </div>
                                        <figure class="media-left">
                                            <p id="tomorrow" style="font-size: 20px;"></p>
                                        </figure>
                                </div>  
                            </div>
                        </div>
                    </div>
                    </div>
                    <!--NyTimes articles goes here-->
                
                    <div class="tile is-parent is-4">

                        <article id="nyTimesContainer" class="tile is-child maximun-yellow-red">

                            <div id="btnContainer">
                                <p class="title cultured"> New York Times <br> Top Stories</p>
                                <a id="clicked" class="button is-primary is-inverted is-outlined is-small nyArticles nyt-buttons"
                                    data-section="home">Home</a>
                                <a class="button is-primary is-inverted is-outlined is-small nyArticles nyt-buttons"
                                    data-section="us">US</a>
                                <a class="button is-primary is-inverted is-outlined is-small nyArticles nyt-buttons"
                                    data-section="world">World</a>
                                <a class="button is-primary is-inverted is-outlined is-small nyArticles nyt-buttons"
                                    data-section="science">Science</a>
                                <a class="button is-primary is-inverted is-outlined is-small nyArticles nyt-buttons"
                                    data-section="arts">Arts</a>
                            </div>

                            <div id="articlesContainer">

                            </div>
    
                        </article>



                    </div>

                    <!-- Notes Section/Tile -->
                    <section class="section tile is-parent is-4">
                        <div class="tile is-child box cerulean-frost">
                            <h3 class="title cultured">Notes</h3>
                            <form>
                                <textarea id="text-area" class="textarea" rows="5"
                                    placeholder="Add your notes here!"></textarea>
                                <br>
                                <!-- This buttons will reload the page. This needs to be fixed in the script -->
                                <button id="save-button" class="button is-primary">Save</button>
                                <button id="delete-button" class="button is-danger">Delete</button>
                            </form>
                            <br>
                            <div id="saved-notes" class="box">
                                <!-- Here go the notes saved by the user -->
                            </div>


                        </div>
                    </section>
                </div>
            </div>

        </div>
    </div>
    <div class="modal favorites">
        <div class="modal-background"></div>
        <div class="modal-card">
          <!-- saved quotes -->
          <div id="savedQuoteContainer">
            <header class="modal-card-head">
                <p class="modal-card-title">My Favorite Quotes</p>
                <button class="exitModal delete" aria-label="close"></button>
            </header>
            <section id="myFavesQuo" class="modal-card-body"></section>
          </div>
          <!-- saved articles -->
          <div id ="savedArtContainer" style="display: none;">
            <header class="modal-card-head">
                <p class="modal-card-title">Saved Articles</p>
                <button class="exitModal delete" aria-label="close"></button>
            </header>
            <section id="myFavesArt" class="modal-card-body"></section>
          </div>
          <!-- ------------------------------------------------------------ -->
          <footer class="modal-card-foot">
            <button id="faveQuotes" class="button is-primary" disabled>Favorite Quotes</button>
            <button id="faveArticles" class="button is-primary">Saved Articles</button>
          </footer>
        </div>
      </div>
      <footer style="background-color:#363636; padding:1.5rem 1rem 2rem; color: #fff">
        <div class="has-text-centered">
          <p>
            Made by Fernando Hernandez, Luis Rujana, Pedro Alburqueque and Jakub Marchel <span>&#169</span> 2020
          </p>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="script.js"></script>
    <script>
        
        $(document).ready(function(){
                
            $("#saveTheQuote").on("click", function(){
                //target quote and author then store it...
                var quoteAuthor = $("#quote-container").children()[1].innerText;
                var myQuote = $("#quote-container").text().trim().replace(quoteAuthor,"");
                var storedQuote = myQuote + " " + quoteAuthor;
                var quoteNumber = localStorage.length;
                var myQuoteKey = "quote" + quoteNumber;
                localStorage[myQuoteKey] = storedQuote;
            })

            
            $("#faveArticles").on("click", function(){
                $("#savedQuoteContainer").attr("style", "display:none;");
                $("#savedArtContainer").removeAttr("style", "display:none;");
                $("#faveQuotes").prop("disabled", false);
                $("#faveArticles").attr("disabled", true);
            })
            
            $("#faveQuotes").on("click", function(){
                $("#savedArtContainer").attr("style", "display:none;");
                $("#savedQuoteContainer").attr("style", "display:;");
                $("#faveQuotes").prop("disabled", true);
                $("#faveArticles").attr("disabled", false);
            })

            $("#openMyFaves").on("click", function(){
                $(".favorites").addClass("is-active");// sets modal to active and it's displayed....

                //gather stored quotes and display in modal...
                for(var q = 0; q < localStorage.length; q ++){
                    var quoteValue = "quote" + q;
                    var retrievedQuote = localStorage.getItem(quoteValue);
                    if(retrievedQuote !== null){
                        var pEl = $("<p class='title is-6'>" + retrievedQuote + "</p><hr>");
                        $("#myFavesQuo").prepend(pEl);
                    }
                }

                //gather stored articles and display in modal...

                for(var a = 0; a < localStorage.length; a++){
                    var artValue = "article" + a;
                    var linkValue = "link" + a;
                    var retrievedArt = localStorage.getItem(artValue);
                    var retrievedLink = localStorage.getItem(linkValue);
                    if(retrievedArt !== null && retrievedLink !== null){
                        var aEl = $("<a href='"+ retrievedLink +"' class='title is-6' target='_blank'>" + retrievedArt + "</a><hr>");
                        $("#myFavesArt").prepend(aEl);
                    }
                }
                
                var myFaveQuoContent = $("#myFavesQuo").text();
                if(myFaveQuoContent == ""){
                    var emptyQuoMsg = $("<h1 class='subtile' style='color: gray;'> :( Nothing saved yet... click on the ❤️ to start saving your favorite quotes!</h1>")
                    $("#myFavesQuo").append(emptyQuoMsg)
                }

                var myFaveArtContent = $("#myFavesArt").text();
                if(myFaveArtContent == ""){
                    var emptyArtMsg = $("<h1 class='subtile' style='color: gray;'> :( Nothing saved yet... click on 'Read Later' to create your reading list!</h1>")
                    $("#myFavesArt").append(emptyArtMsg)
                }

            })

            $(".exitModal").on("click", function(){
                    $("#myFavesQuo").empty();
                    $("#myFavesArt").empty();
                    $(".favorites").removeClass("is-active");
            })

        });    
        </script>

</body>


</html>